


<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title> / ReSharper  DevGuide</title>
    <link rel="stylesheet" href="/resharper-devguide/app/css/styles.min.css">
<link  rel="stylesheet" href="/resharper-devguide/styles/styles.css"></head>
<body data-id="Platform/Shell/Icons/ConsumingIcons">
<div class="wrapper">
    <section class="panel _nav">
        <header class="panel__header">
            <div class="container">
                <form class="search-box">
                    <label for="search-box__input" class="search-box__label">
                        <input type="text" class="search-box__input" id="search-box__input" placeholder="Search ReSharper  DevGuide">
                    </label>
                    <div class="search-box__clear" title="Clear"></div>
                </form>
            </div>
        </header>
        <nav class="panel__content">
            <div class="container _nav">
                <menu class="nav-tree"></menu>
            </div>
            <div class="container _footer panel__footer">
                <p><a href="mailto:feedback@jetbrains.com">Send feedback</a></p>
                <p>&copy; 2000&ndash;2015 <a href="//www.jetbrains.com">JetBrains</a> s.r.o.<br>
                    All rights reserved.</p>
            </div>
        </nav>
    </section>

    <main class="panel _main" role="main">
        <header class="panel__header">
            <div class="container">
                <h3>ReSharper DevGuide</h3>
                
        <div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1">
            <option data-group="primary" value="default" selected>Default</option>
            <option data-group="primary" value="default_for_gnome">GNOME</option>
            <option data-group="primary" value="default_for_kde">KDE</option>
            <option data-group="primary" value="default_for_xwin">XWindow</option>
            <option data-group="primary" value="emacs">Emacs</option>
            <option data-group="primary" value="jbuilder">JBuilder</option>
            <option data-group="primary" value="visual_studio">Visual Studio</option>
            <option data-group="primary" value="netbeans_6.5">NetBeans 6.5</option>
            <option data-group="primary" value="eclipse">Eclipse</option>
            <option data-group="secondary" value="mac_os_x_10.5_">OS X 10.5+</option>
            <option data-group="secondary" value="mac_os_x">OS X</option>
            <option data-group="secondary" value="eclipse_mac_os_x">OS X Eclipse</option></select>
        </div>
    
                <div class="panel-trigger"></div>
            </div>
        </header>
        <section class="panel__content">
            <div class="container">
                <article class="article" data-shortcut-switcher="false">

                    
                    <a name="consuming-icons" class="elem-anchor"></a>
<h1>Consuming Icons<a href="#consuming-icons" class="anchor-link"><span></span></a></h1>

<p>ReSharper provides several ways to consume icons, from WPF controls to display the icon, to APIs to get a Windows Forms compatible bitmap or WPF <code class="code highlight language-text">ImageSource</code>.</p>

<p>The main entry point to the API is the <code class="code highlight language-text">IThemedIconManager</code> interface, which can be imported as a constructor parameter on a <code class="code highlight language-text">[ShellComponent]</code> or <code class="code highlight language-text">[SolutionComponent]</code>. It provides the following members:</p>

<pre><code class="code-block__wrapper code-block _highlighted lang_text">public interface IThemedIconManager
{
  IProperty&lt;IconTheme&gt; CurrentIconTheme { get; }
  ThemedIconManagerIcons Icons { get; }
  IThemedIconManagerRawApi GetRawApi();
}</code></pre>

<p>The <code class="code highlight language-text">CurrentIconTheme</code> property will return an observable property that contains the current icon theme, which can be retrieved for inspection, or subscribed to, in order to know when a theme has changed. See the <a href="../Theming/Icons.html"><span>icon theming section</span></a> for more details on <code class="code highlight language-text">IconTheme</code>.</p>

<p>The <code class="code highlight language-text">GetRawApi</code> method is intended for internal use.</p>

<p>The Icons property returns an instance of <code class="code highlight language-text">ThemedIconManagerIcons</code>, which can be used to get <code class="code highlight language-text">ThemedIconLoader</code>, which in turn is responsible for loading and caching images.</p>

<pre><code class="code-block__wrapper code-block _highlighted lang_csharp"><span class="kt">var</span> <span class="n">loader</span> <span class="p">=</span> <span class="n">manager</span><span class="p">.</span><span class="n">Icons</span><span class="p">[</span><span class="n">myIconId</span><span class="p">];</span></code></pre>

<p>Once you have a <code class="code highlight language-text">ThemedIconLoader</code>, the following properties will retrieve a bitmap and <code class="code highlight language-text">ImageSource</code>, either based on the current theme, or as a live, observable property that updates when the theme changes.</p>

<ul>
  <li><strong><code class="code highlight language-text">CurrentGdipBitmapScreenDpi</code></strong> returns a <code class="code highlight language-text">System.Drawing.Bitmap</code> of the icon for the current theme, for use in Windows Forms. The icon is rendered at the current screen DPI, so will work correctly in high DPI scenarios. It is recommended over the <code class="code highlight language-text">CurrentGdipBitmap96</code> property, which renders the icon at 96 DPI, which will not look good in high DPI.</li>
  <li><strong><code class="code highlight language-text">LiveGdiBitmapScreenDpi</code></strong> returns an observable <code class="code highlight language-text">IProperty&lt;Bitmap&gt;</code> which will notify of new values when the theme changes. The bitmap is rendered at the screen DPI and should be favoured over <code class="code highlight language-text">LiveGdipBitmap96</code> which is only rendered at 96 DPI, and will not look good in high DPI.</li>
  <li><strong><code class="code highlight language-text">CurrentImageSource</code></strong> returns a WPF <code class="code highlight language-text">ImageSource</code> of the icon for the current theme. This can be a vector image, or a bitmap that will be correctly rendered when used in a WPF window.</li>
  <li><strong><code class="code highlight language-text">LiveImageSource</code></strong> returns an observable <code class="code highlight language-text">IProperty&lt;ImageSource&gt;</code> which will update whenever the image changes, due to theme changes.</li>
</ul>

<a name="wpf-controls" class="elem-anchor"></a>
<h2>WPF controls<a href="#wpf-controls" class="anchor-link"><span></span></a></h2>

<p>The <code class="code highlight language-text">ThemedIconViewImage</code> class is a WPF element that derives from <code class="code highlight language-text">Image</code>, and can be used as a drop in replacement. It will set up a live binding from an icon ID to the <code class="code highlight language-text">Source</code> property. If the icon ID changes, or if the icon represented by the ID changes (due to a theme change), the binding automatically updates the <code class="code highlight language-text">Source</code> property and the new image is displayed.</p>

<p>The icon ID can be specified either in the constructor, or by setting the <code class="code highlight language-text">IconId</code> property. Alternatively, the icon ID can be bound against the <code class="code highlight language-text">DataContext</code> property, allowing for automatic updates:</p>

<pre><code class="code-block__wrapper code-block _highlighted lang_csharp"><span class="k">public</span> <span class="n">UIElement</span> <span class="nf">GetThemedIconViewImage</span><span class="p">(</span><span class="n">Lifetime</span> <span class="n">lifetime</span><span class="p">,</span> <span class="n">IProperty</span><span class="p">&lt;</span><span class="n">IconId</span><span class="p">&gt;</span> <span class="n">liveIconId</span><span class="p">)</span>
<span class="p">{</span>
  <span class="kt">var</span> <span class="n">image</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ThemedIconViewImage</span><span class="p">();</span>
  <span class="c1">// Wire up the live icon ID property to push the value into the DataContext,</span>
  <span class="c1">// which in turn causes the correctly themed icon to be displayed. The</span>
  <span class="c1">// property binding is automatically cleared when the Lifetime terminates</span>
  <span class="n">liveIconId</span><span class="p">.</span><span class="n">FlowInto</span><span class="p">(</span><span class="n">lifetime</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">DataContextProperty</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">image</span><span class="p">;</span>
<span class="p">}</span></code></pre>

<p>If using compiled icons, ReSharper provides the <code class="code highlight language-text">ThemedIcon</code> markup extension to provide live binding to an <code class="code highlight language-text">Image</code> element’s <code class="code highlight language-text">Source</code> property. See below for details.</p>

<a name="using-compiled-icons" class="elem-anchor"></a>
<h2>Using compiled icons<a href="#using-compiled-icons" class="anchor-link"><span></span></a></h2>

<p>The most common icon type is the compiled icon, which is compiled as a resource and embedded in an assembly. Compiled icons are identified with an instance of the <code class="code highlight language-text">CompiledIconId</code> type. Typically, these icon ID instances are automatically generated, and can be found as the <code class="code highlight language-text">Id</code> static property of a class named after the icon, itself implemented as a nested class named after the icon group.</p>

<p>For example, you can get the icon ID for the To Do Explorer option page using:</p>

<pre><code class="code-block__wrapper code-block _highlighted lang_csharp"><span class="kt">var</span> <span class="n">iconId</span> <span class="p">=</span> <span class="n">TodoItemsThemedIcons</span><span class="p">.</span><span class="n">TodoOptions</span><span class="p">.</span><span class="n">Id</span><span class="p">;</span></code></pre>

<p>It is also possible to bind a compiled icon to an image source in WPF, using the <code class="code highlight language-text">ThemedIcon</code> markup extension. The extension will create a live binding, which automatically updates the image when the icon represented by the compiled icon ID changes, usually in response to a theme change.</p>

<pre><code class="code-block__wrapper code-block _highlighted lang_xml"><span class="nt">&lt;Image</span> <span class="na">Source=</span><span class="s">&quot;{icons:ThemedIcon myres:TodoItemsThemedIcons+TodoOptions}&quot;</span> <span class="nt">/&gt;</span></code></pre>

<p>Note that the parameter to the extension is the class that holds the <code class="code highlight language-text">CompiledIconId</code> instance, and not the <code class="code highlight language-text">Id</code> property. This is because the XAML requires a compile time value, rather than a runtime instance.</p>

<p>A similar requirement is necessary when referencing an icon in an attribute, for example with <code class="code highlight language-text">OptionsPageAttribute</code>:</p>

<pre><code class="code-block__wrapper code-block _highlighted lang_csharp"><span class="na">[OptionsPage(PageId, &quot;To-do items&quot;, typeof(TodoItemsThemedIcons.ToDoItemsPage))]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">TodoItemsPage</span> <span class="p">:</span> <span class="n">IOptionsPage</span>
<span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span></code></pre>

<p>The <code class="code highlight language-text">OptionsPageAttribute</code> class converts the <code class="code highlight language-text">Type</code> to an <code class="code highlight language-text">IconId</code> using the <code class="code highlight language-text">CompiledIconClassAttribute.TryGetCompiledIconClassId</code> static method:</p>

<pre><code class="code-block__wrapper code-block _highlighted lang_csharp"><span class="kt">var</span> <span class="n">iconId</span> <span class="p">=</span> <span class="n">CompiledIconClassAttribute</span><span class="p">.</span><span class="n">TryGetCompiledIconClassId</span><span class="p">(</span><span class="n">typeOfIcon</span><span class="p">,</span> <span class="n">OnError</span><span class="p">.</span><span class="n">LogException</span><span class="p">);</span></code></pre>

<p>Once the <code class="code highlight language-text">IconId</code> is known, the standard icon loader API discussed above can be used to get a bitmap or <code class="code highlight language-text">ImageSource</code>. A shortcut is to use the <code class="code highlight language-text">GetIcon</code> extension method for <code class="code highlight language-text">IThemedIconManager</code> to return a <code class="code highlight language-text">ThemedIconLoader</code> which can be used to get the icon image.</p>

<pre><code class="code-block__wrapper code-block _highlighted lang_csharp"><span class="n">IProperty</span><span class="p">&lt;</span><span class="n">ImageSource</span><span class="p">&gt;</span> <span class="n">liveImage</span> <span class="p">=</span> <span class="n">themedIconManager</span><span class="p">.</span><span class="n">GetIcon</span><span class="p">&lt;</span><span class="n">TodoItemsThemedIcons</span><span class="p">.</span><span class="n">ToDoItemsPage</span><span class="p">&gt;().</span><span class="n">LiveImageSource</span><span class="p">;</span></code></pre>

<a name="discovering-compiled-icons" class="elem-anchor"></a>
<h2>Discovering compiled icons<a href="#discovering-compiled-icons" class="anchor-link"><span></span></a></h2>

<p>ReSharper ships with over 1000 compiled icons, so finding an icon to use can be tricky. A significant number of the icons are not intended to be used by extensions - they are icons for tool windows, actions or other UI elements that are not relevant to extensions. It is recommended to create your own icons where possible, but if you wish to reuse existing icons, make sure they are intended for the same purpose (for example, do not use the “unit test pass” icon to represent success in an extension).</p>

<p>Should you wish to reuse existing icons, you can make use of an Internal feature that allows you to browse all of the icons registered with the <code class="code highlight language-text">ThemedIconManager</code>. Start ReSharper in Internal mode, and use the ReSharper → Internal → Windows → Show Themed Icons menu option. The tool window that opens will show all available icons, either in a tile view, flat list, or grouped by owner. This grouped option is very useful, as it will group the icons by their owner - in the case of compiled icons, this will give an indication of the name of the compiled icon ID class (the name is actually the name of the “icon pack”, or the XAML file that contains the definition of the icon, but that name is usually the same as, or very similar to the icon ID class name).</p>

<p>When displaying as a flat or grouped list, the icons are searchable, and typing a value will filter out any icons that don’t match the search text.</p>

<a name="psi-symbols" class="elem-anchor"></a>
<h2>PSI symbols<a href="#psi-symbols" class="anchor-link"><span></span></a></h2>

<p>While it is possible to use the icon manager to get icons for PSI elements such as class, method or parameter, it is highly recommended to use the <code class="code highlight language-text">PsiIconManager</code> class instead. See the section on <a href="../../../PSI/Icons.html"><span>icons in the PSI</span></a> for more details.</p>



                    <div class="last-modified">
                        Last modified: 8 May 2015
                    </div>
                </article>

                <section class="disqus">
                    <div id="disqus_thread"></div>
                </section>
            </div>
        </section>
    </main>
</div>


<script data-main="/resharper-devguide/app/js/main.build" data-baseurl="/resharper-devguide/" src="/resharper-devguide/app/js/vendor/requirejs/require.js"></script>

</body>
</html>

