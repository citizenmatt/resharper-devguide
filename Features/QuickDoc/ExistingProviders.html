


<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title> / ReSharper  DevGuide</title>
    <link rel="stylesheet" href="/resharper/devguide/app/css/styles.min.css">
<link  rel="stylesheet" href="/resharper/devguide/styles/styles.css"></head>
<body data-id="Features/QuickDoc/ExistingProviders">
<div class="wrapper">
    <section class="panel _nav">
        <header class="panel__header">
            <div class="container">
                <form class="search-box">
                    <label for="search-box__input" class="search-box__label">
                        <input type="text" class="search-box__input" id="search-box__input" placeholder="Search ReSharper  DevGuide">
                    </label>
                    <div class="search-box__clear" title="Clear"></div>
                </form>
            </div>
        </header>
        <nav class="panel__content">
            <div class="container _nav">
                <menu class="nav-tree"></menu>
            </div>
            <div class="container _footer panel__footer">
                <p><a href="mailto:feedback@jetbrains.com">Send feedback</a></p>
                <p>&copy; 2000&ndash;2015 <a href="//www.jetbrains.com">JetBrains</a> s.r.o.<br>
                    All rights reserved.</p>
            </div>
        </nav>
    </section>

    <main class="panel _main" role="main">
        <header class="panel__header">
            <div class="container">
                <h3>ReSharper DevGuide</h3>
                
        <div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1">
            <option data-group="primary" value="default" selected>Default</option>
            <option data-group="primary" value="default_for_gnome">GNOME</option>
            <option data-group="primary" value="default_for_kde">KDE</option>
            <option data-group="primary" value="default_for_xwin">XWindow</option>
            <option data-group="primary" value="emacs">Emacs</option>
            <option data-group="primary" value="jbuilder">JBuilder</option>
            <option data-group="primary" value="visual_studio">Visual Studio</option>
            <option data-group="primary" value="netbeans_6.5">NetBeans 6.5</option>
            <option data-group="primary" value="eclipse">Eclipse</option>
            <option data-group="secondary" value="mac_os_x_10.5_">OS X 10.5+</option>
            <option data-group="secondary" value="mac_os_x">OS X</option>
            <option data-group="secondary" value="eclipse_mac_os_x">OS X Eclipse</option></select>
        </div>
    
                <div class="panel-trigger"></div>
            </div>
        </header>
        <section class="panel__content">
            <div class="container">
                <article class="article" data-shortcut-switcher="false">

                    
                    <a name="existing-quickdoc-providers" class="elem-anchor"></a>
<h1>Existing QuickDoc providers<a href="#existing-quickdoc-providers" class="anchor-link"><span></span></a></h1>

<ul id="markdown-toc">
  <li><a href="#overview" id="markdown-toc-overview"><span>Overview<a href="#overview" class="anchor-link"><span></span></a></span></a>    <ul>
      <li><a href="#xml-doc-comments" id="markdown-toc-xml-doc-comments"><span>XML Doc Comments<a href="#xml-doc-comments" class="anchor-link"><span></span></a></span></a></li>
      <li><a href="#language-specific" id="markdown-toc-language-specific"><span>Language specific<a href="#language-specific" class="anchor-link"><span></span></a></span></a></li>
      <li><a href="#elements-without-documentation" id="markdown-toc-elements-without-documentation"><span>Elements without documentation<a href="#elements-without-documentation" class="anchor-link"><span></span></a></span></a></li>
      <li><a href="#high-priority-and-fallbacks" id="markdown-toc-high-priority-and-fallbacks"><span>High priority and fallbacks<a href="#high-priority-and-fallbacks" class="anchor-link"><span></span></a></span></a></li>
    </ul>
  </li>
  <li><a href="#extending-the-default-providers" id="markdown-toc-extending-the-default-providers"><span>Extending the default providers<a href="#extending-the-default-providers" class="anchor-link"><span></span></a></span></a></li>
</ul>

<a name="overview" class="elem-anchor"></a>
<h2>Overview<a href="#overview" class="anchor-link"><span></span></a></h2>

<p>ReSharper ships with a number of default providers that create QuickDoc documentation for a broad range of scenarios. Some of these are themselves extensible.</p>

<a name="xml-doc-comments" class="elem-anchor"></a>
<h3>XML Doc Comments<a href="#xml-doc-comments" class="anchor-link"><span></span></a></h3>

<p>The <code class="code highlight language-text">QuickDocTypeMemberProvider</code> and <code class="code highlight language-text">QuickDocCommentNodeProvider</code> classes support XML DocComments.</p>

<ul>
  <li><strong><code class="code highlight language-text">QuickDocCommentNodeProvider</code></strong> uses a language specific implementation of <code class="code highlight language-text">IXmDocLocator</code> to find the closest XML Doc Comment block to the text caret offset, and uses this XML block to display documentation. This is not CLR language specific - XML Doc Comments are supported in JavaScript and TypeScript.</li>
  <li><strong><code class="code highlight language-text">QuickDocTypeMemberProvider</code></strong> will look to see if the declared element under the text caret implements <code class="code highlight language-text">ITypeMember</code> (which implies a CLR element that also implements <code class="code highlight language-text">IXmlDocIdOwner</code>). If so, it gets the XML DocComment Id and then retrieves the XML documentation via a call to <code class="code highlight language-text">IDeclaredElement.GetXMLDoc</code>. This also handles documentation shipped with compiled code.</li>
</ul>

<p><code class="code highlight language-text">QuickDocTypeMemberProvider</code> also has a fallback - if there is no XML documentation, it looks for the <code class="code highlight language-text">System.ComponentModel.DescriptionAttribute</code> and uses this for the description of the type member.</p>

<a name="language-specific" class="elem-anchor"></a>
<h3>Language specific<a href="#language-specific" class="anchor-link"><span></span></a></h3>

<p>Some of the default providers are language specific.</p>

<ul>
  <li><strong><code class="code highlight language-text">CSharpQuickQueryRangeVariableProvider</code></strong> handles documentation for a variable created in LINQ <code class="code highlight language-text">from</code> queries. It simply displays the range variable name and type, allowing navigation to the documentation of the type, and a “go to” link to navigate to the declaration of the range variable. Without this provider, the variable would not have any documentation.</li>
  <li><strong><code class="code highlight language-text">QuickDocCssDefinitionProvider</code></strong> handles documentation for CSS properties and values. Interestingly, it will call <code class="code highlight language-text">IDeclaredElement.GetXMLDoc()</code> on the CSS declared element, which creates an XML node with a <code class="code highlight language-text">member</code> element and populates it with <code class="code highlight language-text">name</code>, <code class="code highlight language-text">summary</code>, <code class="code highlight language-text">description</code> and <code class="code highlight language-text">compatibility</code> content.</li>
  <li><strong><code class="code highlight language-text">QuickDocJsFunctionProvider</code></strong> displays documentation for any element that implements <code class="code highlight language-text">IJavaScriptTypeOwner</code>. This displays any XML Doc Comment based documentation for the code element.</li>
</ul>

<a name="elements-without-documentation" class="elem-anchor"></a>
<h3>Elements without documentation<a href="#elements-without-documentation" class="anchor-link"><span></span></a></h3>

<p>Not all code elements map directly to declared elements with documentation. The <code class="code highlight language-text">QuickDocLocalSymbolProvider</code> creates simple documentation for local symbols that don’t have actual documentation, while the <code class="code highlight language-text">QuickDocCandidatesProvider</code> tries to map a reference in the code to a declared element that does have documentation</p>

<ul>
  <li><strong><code class="code highlight language-text">QuickDocLocalSymbolProvider</code></strong> provides a simple description for local symbols based on the type of local symbol (variable, parameter, etc.) and the name of the symbol. Provides “go to” navigation to the declaration of the symbol.</li>
  <li>
    <p><strong><code class="code highlight language-text">QuickDocCandidatesProvider</code></strong> uses the reference at the text caret position to get the declared elements to get the documentation. It will use the language specific <code class="code highlight language-text">ILanguageReferenceSelector</code> to try and find language specific candidates (e.g. C# will see if the reference is part of an object creation expression and return the declared elements of the constructor and the type being constructed), or it will simply resolve the reference to find the normal declared element. The provider will use these declared elements to find the appropriate documentation.</p>

    <p>Normally, the providers and the presenters are paired - a specific provider will pass data to a matching provider. But the <code class="code highlight language-text">QuickDocCandidatesProvider</code> will find a declared element that is then passed to <code class="code highlight language-text">QuickDocTypeMemberPresenter</code>, which means it will look for CLR type members that have XML documentation.</p>
  </li>
</ul>

<a name="high-priority-and-fallbacks" class="elem-anchor"></a>
<h3>High priority and fallbacks<a href="#high-priority-and-fallbacks" class="anchor-link"><span></span></a></h3>

<p>The default providers also make use of the <code class="code highlight language-text">QuickDocProviderAttribute.Priority</code> property. Most of the providers have a priority of <code class="code highlight language-text">0</code>, as they don’t overlap in the elements they handle, however, a couple do overlap, and make use of the <code class="code highlight language-text">Priority</code>.</p>

<ul>
  <li>
    <p><strong><code class="code highlight language-text">QuickDocResxProvider</code></strong> has a priority of <code class="code highlight language-text">-10</code>, which means that it is called before the other default providers. It checks to see if the current declared element is an instance of <code class="code highlight language-text">IResourceItemDeclaredElement</code>, such as the <code class="code highlight language-text">data</code> tag in a <code class="code highlight language-text">.resx</code> file, or it will look for a CLR property or method that belongs to a resource class. It has to be processed first, or the standard XML Doc Comments handling would take precedence.</p>
  </li>
  <li>
    <p><strong><code class="code highlight language-text">QuickDocDescriptionProvider</code></strong> has a priority of <code class="code highlight language-text">1</code>, meaning it’s a fallback to the other default providers. If there isn’t a more suitable provider, this one will be used to provide a description of the current declared element. It is used as a fallback as it can only return a single string to act as the description, rather than a fuller piece of documentation like that supplied by XML Doc Comments.</p>

    <p>It retrieves the description by calling into <code class="code highlight language-text">IDeclaredElementDescriptionPresenter</code>, which defers to an extensible, live collection of <code class="code highlight language-text">IDeclaredElementDescriptionProvider</code>. You can extend this collection by implementing <code class="code highlight language-text">IDeclaredElementDescriptionProvider</code> and decorating your class with the <code class="code highlight language-text">DeclaredElementDescriptionProviderAttribute</code>.</p>

    <p>The default description providers support descriptions for XML nodes via XML schema, CSS compatibility information and HTML element descriptions stored in an internal resource file - which can itself be extended by implementing <code class="code highlight language-text">IHtmlDeclaredElementsProvider</code>.</p>
  </li>
</ul>

<a name="extending-the-default-providers" class="elem-anchor"></a>
<h2>Extending the default providers<a href="#extending-the-default-providers" class="anchor-link"><span></span></a></h2>

<p>If you wish to extend the default providers, for example, if you’re implementing new language support, there are several ways to extend the existing providers to get QuickDoc support:</p>

<ol>
  <li>If your language supports standard XML Doc Comments in source, implement <code class="code highlight language-text">IXmlDocLocator</code> in a class marked with <code class="code highlight language-text">[Language (typeof(NewLanguage))]</code>. The default <code class="code highlight language-text">QuickDocCommentNodeProvider</code> class will use this interface to find the XML Doc Comment node.</li>
  <li>If your language is a CLR language and also supports standard XML Doc Comments in compiled form, your PSI tree should implement <code class="code highlight language-text">ITypeMember</code>, and therefore <code class="code highlight language-text">IClrDeclaredElement</code> and <code class="code highlight language-text">IXmlDocIdOwner</code>. The default <code class="code highlight language-text">QuickDocTypeMemberProvider</code> class will retrieve the element’s XML doc ID from <code class="code highlight language-text">IXmlDocIdOwner.XMLDocId</code> and retrieve the XML itself from <code class="code highlight language-text">IDeclaredElement.GetXMLDoc()</code>.</li>
  <li>You can provide a simple, single string description for your <code class="code highlight language-text">IDeclaredElement</code> derived types by implementing <code class="code highlight language-text">IDeclaredElementDescriptionProvider</code>, which is used by <code class="code highlight language-text">QuickDocDescriptionProvider</code></li>
  <li>Implement <code class="code highlight language-text">ILanguageReferenceSelector</code> and mark your class with <code class="code highlight language-text">[Language(typeof(NewLanguage))]</code>. This class will take in an <code class="code highlight language-text">IReference</code> and use it to find any relevant declared elements from which to find documentation. For example, the C# implementation looks for object creation expressions and returns candidates for the constructor and the type being used. This interface is used by the <code class="code highlight language-text">QuickDocCandidatesProvider</code>.</li>
</ol>

<p>Of course, if your requirements don’t fit any of these scenarios, you can <a href="Implementing.html"><span>implement <code class="code highlight language-text">IQuickDocProvider</code> and <code class="code highlight language-text">IQuickDocPresenter</code> directly</span></a>. You should use the helper methods in <code class="code highlight language-text">XmlDocHtmlUtil</code> and <code class="code highlight language-text">XmlDocHtmlPresenter</code> to build the HTML.</p>



                    <div class="last-modified">
                        Last modified: 8 May 2015
                    </div>
                </article>

                <section class="disqus">
                    <div id="disqus_thread"></div>
                </section>
            </div>
        </section>
    </main>
</div>


<script data-main="/resharper/devguide/app/js/main.build" data-baseurl="/resharper/devguide/" src="/resharper/devguide/app/js/vendor/requirejs/require.js"></script>

</body>
</html>

