


<!doctype html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title> / ReSharper  DevGuide</title>
    <link rel="stylesheet" href="/resharper-devguide/app/css/styles.min.css">
<link  rel="stylesheet" href="/resharper-devguide/styles/styles.css"></head>
<body data-id="Features/QuickDoc/Testing">
<div class="wrapper">
    <section class="panel _nav">
        <header class="panel__header">
            <div class="container">
                <form class="search-box">
                    <label for="search-box__input" class="search-box__label">
                        <input type="text" class="search-box__input" id="search-box__input" placeholder="Search ReSharper  DevGuide">
                    </label>
                    <div class="search-box__clear" title="Clear"></div>
                </form>
            </div>
        </header>
        <nav class="panel__content">
            <div class="container _nav">
                <menu class="nav-tree"></menu>
            </div>
            <div class="container _footer panel__footer">
                <p><a href="mailto:feedback@jetbrains.com">Send feedback</a></p>
                <p>&copy; 2000&ndash;2015 <a href="//www.jetbrains.com">JetBrains</a> s.r.o.<br>
                    All rights reserved.</p>
            </div>
        </nav>
    </section>

    <main class="panel _main" role="main">
        <header class="panel__header">
            <div class="container">
                <h3>ReSharper DevGuide</h3>
                
        <div class="shortcuts-switcher"><label for="switch-shortcuts">Keymap:</label><select id="switch-shortcuts" class="select _shortcuts" height="1">
            <option data-group="primary" value="default" selected>Default</option>
            <option data-group="primary" value="default_for_gnome">GNOME</option>
            <option data-group="primary" value="default_for_kde">KDE</option>
            <option data-group="primary" value="default_for_xwin">XWindow</option>
            <option data-group="primary" value="emacs">Emacs</option>
            <option data-group="primary" value="jbuilder">JBuilder</option>
            <option data-group="primary" value="visual_studio">Visual Studio</option>
            <option data-group="primary" value="netbeans_6.5">NetBeans 6.5</option>
            <option data-group="primary" value="eclipse">Eclipse</option>
            <option data-group="secondary" value="mac_os_x_10.5_">OS X 10.5+</option>
            <option data-group="secondary" value="mac_os_x">OS X</option>
            <option data-group="secondary" value="eclipse_mac_os_x">OS X Eclipse</option></select>
        </div>
    
                <div class="panel-trigger"></div>
            </div>
        </header>
        <section class="panel__content">
            <div class="container">
                <article class="article" data-shortcut-switcher="false">

                    
                    <a name="testing-quickdoc-providers" class="elem-anchor"></a>
<h1>Testing QuickDoc providers<a href="#testing-quickdoc-providers" class="anchor-link"><span></span></a></h1>

<p>You can test your QuickDoc providers by creating a test class that derives from <code class="code highlight language-text">QuickDocTestBase</code>. This class derives from <code class="code highlight language-text">BaseTestWithTextControl</code>, and will open a text file into an in-memory text control and place the text caret at the location indicated by the <code class="code highlight language-text">{caret}</code> placeholder. It then uses the <code class="code highlight language-text">QuickDocManager</code> class to ensure that at least one provider can generate documentation, and then generates the HTML and compares it to the expected value in the gold file for the test.</p>

<a name="invoking-the-test" class="elem-anchor"></a>
<h2>Invoking the test<a href="#invoking-the-test" class="anchor-link"><span></span></a></h2>

<p>The test can be invoked by calling <code class="code highlight language-text">DoNamedTest2()</code> which will load a source file based on the name of the test method (minus any “Test” prefix or suffix, <code class="code highlight language-text">DoNamedTest</code> will use the given name). Alternatively, the test can call <code class="code highlight language-text">DoOneTest()</code> and explicitly pass the name of the file in.</p>

<p>In both cases, the file extension is added by the base class, which can be declaratively set by applying the <code class="code highlight language-text">TestFileExtensionAttribute</code> to the test class, or by overriding the <code class="code highlight language-text">Extension</code> property.</p>

<p>The test class should override the <code class="code highlight language-text">RelativeTestDataPath</code> property to supply the location of the source and gold files.</p>

<a name="example" class="elem-anchor"></a>
<h2>Example<a href="#example" class="anchor-link"><span></span></a></h2>

<p>As an example, this test class will test the C# QuickDoc provider for XML Doc Comments defined in the source file. The two methods show both ways of invoking the test, using the same file as input.</p>

<p><strong>test\src\QuickDoc\CSharpQuickDocTest.cs:</strong></p>

<pre><code class="code-block__wrapper code-block _highlighted lang_csharp"><span class="na">[TestFileExtension(CSharpProjectFileType.CS_EXTENSION)]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">CSharpQuickDocTest</span> <span class="p">:</span> <span class="n">QuickDocTestBase</span>
<span class="p">{</span>
  <span class="k">protected</span> <span class="k">override</span> <span class="kt">string</span> <span class="n">RelativeTestDataPath</span>
  <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="s">@&quot;QuickDoc\CSharp&quot;</span><span class="p">;</span> <span class="p">}</span>
  <span class="p">}</span>

<span class="na">  [Test]</span>
  <span class="k">public</span> <span class="k">void</span> <span class="nf">TestQuickDoc01</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="n">DoNamedTest2</span><span class="p">();</span>
  <span class="p">}</span>

<span class="na">  [Test]</span>
  <span class="k">public</span> <span class="k">void</span> <span class="nf">TestSimpleCSharpDocComments</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="n">DoOneTest</span><span class="p">(</span><span class="s">&quot;QuickDoc01&quot;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>

<p><strong>test\data\QuickDoc\CSharp\QuickDoc01.cs</strong></p>

<p>Note the <code class="code highlight language-text">{caret}</code> marker. This is used by the test’s base class to position the text caret in the in-memory text control, ensuring the QuickDoc is for the class <code class="code highlight language-text">Foo</code>.</p>

<pre><code class="code-block__wrapper code-block _highlighted lang_csharp"><span class="c1">/// &lt;summary&gt;Bar!&lt;/summary&gt;</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">Fo</span><span class="p">{</span><span class="n">caret</span><span class="p">}</span><span class="n">o</span>
<span class="p">{</span>
<span class="p">}</span></code></pre>

<p><strong>test\data\QuickDoc\CSharp\QuickDoc01.cs.gold</strong></p>

<p>This file is a dump of the HTML that is generated by the QuickDoc presenter. Even though the content of this file is HTML, the name still includes the <code class="code highlight language-text">.cs</code> file extension - it is the gold file for the <code class="code highlight language-text">QuickDoc01.cs</code> input file.</p>

<p>When the test is run, the QuickDoc is generated for the text caret position, and the generated HTML is compared against this file. If they differ, the test fails. If they’re the same, the test passes.</p>

<pre><code class="code-block__wrapper code-block _highlighted lang_html"><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;META</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
       <span class="nt">body</span><span class="o">,</span><span class="nt">tbody</span> <span class="p">{</span><span class="k">font</span><span class="o">:</span> <span class="k">normal</span> <span class="m">8pt</span> <span class="n">verdana</span><span class="o">,</span><span class="n">arial</span><span class="o">,</span><span class="n">helvetica</span><span class="p">;</span> <span class="k">color</span><span class="o">:</span> <span class="n">InfoText</span><span class="p">;</span> <span class="k">background-color</span><span class="o">:</span> <span class="n">InfoBackground</span><span class="p">;</span> <span class="k">margin</span><span class="o">:</span> <span class="m">0px</span><span class="p">;</span> <span class="k">padding</span><span class="o">:</span> <span class="m">0px</span><span class="p">;</span> <span class="k">overflow-y</span><span class="o">:</span> <span class="n">expression</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">scrollHeight</span> <span class="o">&gt;</span> <span class="n">document</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">clientHeight</span> <span class="o">?</span> <span class="s1">&#39;scroll&#39;</span> <span class="o">:</span> <span class="s1">&#39;hidden&#39;</span><span class="p">);</span> <span class="p">}</span>
       <span class="nt">h1</span> <span class="p">{</span><span class="k">margin</span><span class="o">:</span> <span class="m">5px</span> <span class="m">0px</span> <span class="m">0px</span> <span class="m">0px</span><span class="p">;</span> <span class="k">font</span><span class="o">:</span> <span class="k">bold</span> <span class="m">9pt</span> <span class="n">verdana</span><span class="o">,</span><span class="n">arial</span><span class="o">,</span><span class="n">helvetica</span><span class="p">;}</span>
       <span class="nt">table</span><span class="nc">.list</span> <span class="p">{</span><span class="k">margin</span><span class="o">:</span> <span class="m">5px</span> <span class="m">0</span> <span class="m">5px</span> <span class="m">0</span><span class="p">}</span>
       <span class="nt">table</span><span class="nc">.list</span> <span class="nt">tr</span> <span class="nt">th</span> <span class="p">{</span><span class="k">font-size</span><span class="o">:</span> <span class="m">8pt</span><span class="p">;</span> <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;}</span>
       <span class="nt">table</span><span class="nc">.list</span> <span class="nt">tr</span> <span class="p">{</span><span class="k">font-size</span><span class="o">:</span> <span class="m">8pt</span><span class="p">;</span> <span class="k">text-align</span><span class="o">:</span> <span class="k">left</span><span class="p">;}</span>
       <span class="nt">td</span><span class="nc">.pdef</span> <span class="p">{</span><span class="k">white-space</span><span class="o">:</span> <span class="k">nowrap</span><span class="p">;</span> <span class="k">vertical-align</span><span class="o">:</span> <span class="k">top</span><span class="p">;}</span>
       <span class="nt">pre</span><span class="nc">.outline</span> <span class="p">{</span><span class="k">margin</span><span class="o">:</span> <span class="m">5px</span> <span class="m">0</span> <span class="m">5px</span> <span class="m">0</span><span class="p">;}</span>
       <span class="nt">dl</span><span class="nc">.headers</span> <span class="p">{</span><span class="k">font-size</span><span class="o">:</span> <span class="m">10pt</span><span class="p">;</span> <span class="k">margin</span><span class="o">:</span> <span class="m">5px</span> <span class="m">0</span> <span class="m">10px</span> <span class="m">0</span><span class="p">;}</span>
       <span class="nt">dl</span><span class="nc">.headers</span> <span class="nt">dt</span> <span class="p">{</span><span class="k">float</span><span class="o">:</span><span class="k">left</span><span class="p">;}</span>
       <span class="nt">dl</span><span class="nc">.headers</span> <span class="nt">dd</span> <span class="p">{</span><span class="k">padding-left</span><span class="o">:</span> <span class="m">50px</span><span class="p">;}</span>
       <span class="nt">dl</span><span class="nc">.headers</span> <span class="nt">dt</span> <span class="nt">em</span> <span class="p">{</span><span class="k">display</span><span class="o">:</span><span class="k">block</span><span class="p">;</span> <span class="k">font</span><span class="o">:</span><span class="m">100%</span> <span class="k">normal</span><span class="p">;</span> <span class="k">padding-left</span><span class="o">:</span> <span class="m">15px</span><span class="p">;}</span>
       <span class="nt">br</span> <span class="p">{</span><span class="k">clear</span><span class="o">:</span><span class="k">left</span><span class="p">;}</span>
       <span class="nt">a</span><span class="o">,</span><span class="nt">a</span><span class="nd">:visited</span><span class="p">{</span><span class="k">color</span><span class="o">:</span><span class="m">#06c</span><span class="p">;}</span>
       <span class="nt">a</span><span class="nc">.ext</span><span class="o">,</span><span class="nt">a</span><span class="nc">.ext</span><span class="nd">:visited</span><span class="p">{</span><span class="k">color</span><span class="o">:</span><span class="nb">gray</span><span class="p">;}</span>
    <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;script </span><span class="na">language=</span><span class="s">&quot;JavaScript&quot;</span><span class="nt">&gt;</span><span class="kd">function</span> <span class="nx">fixScrollBars</span><span class="p">(){</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">overflowY</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollHeight</span> <span class="o">&gt;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="o">?</span> <span class="s1">&#39;scroll&#39;</span> <span class="o">:</span> <span class="s1">&#39;hidden&#39;</span><span class="p">;}</span><span class="kd">function</span> <span class="nx">showHide</span><span class="p">(</span><span class="nx">elementid</span><span class="p">){</span><span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">elementid</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">==</span> <span class="s1">&#39;none&#39;</span><span class="p">){</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">elementid</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">elementid</span><span class="o">+</span><span class="s2">&quot;img&quot;</span><span class="p">).</span><span class="nx">src</span><span class="o">=</span><span class="s1">&#39;InlineCollapsPathJS&#39;</span><span class="p">;</span><span class="nb">window</span><span class="p">.</span><span class="nx">external</span><span class="p">.</span><span class="nx">Expanded</span><span class="p">()}</span> <span class="k">else</span> <span class="p">{</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">elementid</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">elementid</span><span class="o">+</span><span class="s1">&#39;img&#39;</span><span class="p">).</span><span class="nx">src</span><span class="o">=</span><span class="s1">&#39;InlineExpandPathJS&#39;</span><span class="p">;};</span> <span class="nx">fixScrollBars</span><span class="p">();}</span><span class="kd">function</span> <span class="nx">showAttributes</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">);</span><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>  <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="s1">&#39;attrregion&#39;</span><span class="p">)</span>    <span class="p">{</span> <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>  <span class="p">}};</span><span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>  <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="s1">&#39;attrdef&#39;</span><span class="p">)</span>    <span class="p">{</span> <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;inline&#39;</span><span class="p">;</span>  <span class="p">}};</span><span class="nb">window</span><span class="p">.</span><span class="nx">external</span><span class="p">.</span><span class="nx">Expanded</span><span class="p">();</span><span class="nx">fixScrollBars</span><span class="p">();}</span><span class="kd">function</span> <span class="nx">handleClick</span><span class="p">(</span><span class="nx">oEvent</span><span class="p">,</span> <span class="nx">oTarget</span><span class="p">)</span> <span class="p">{</span><span class="k">if</span> <span class="p">(</span><span class="nx">oEvent</span><span class="p">.</span><span class="nx">ctrlKey</span><span class="p">)</span> <span class="p">{</span><span class="nb">window</span><span class="p">.</span><span class="nx">external</span><span class="p">.</span><span class="nx">NavigateCtrl</span><span class="p">(</span><span class="nx">oTarget</span><span class="p">);</span> <span class="p">}</span><span class="k">else</span> <span class="p">{</span><span class="nb">window</span><span class="p">.</span><span class="nx">external</span><span class="p">.</span><span class="nx">Navigate</span><span class="p">(</span><span class="nx">oTarget</span><span class="p">);</span> <span class="p">}}</span><span class="nt">&lt;/script&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">&quot;float:right&quot;</span> <span class="na">align=</span><span class="s">&quot;right&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;about:goto&quot;</span><span class="nt">&gt;</span>go to<span class="nt">&lt;/a&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;dl</span> <span class="na">class=</span><span class="s">&quot;headers&quot;</span><span class="nt">&gt;&lt;dt&gt;</span>public class <span class="nt">&lt;b&gt;</span> Foo<span class="nt">&lt;/b&gt;&lt;/dt&gt;&lt;dd&gt;</span><span class="ni">&amp;nbsp;</span><span class="nt">&lt;/dd&gt;&lt;dt&gt;&lt;/dt&gt;&lt;/dl&gt;&lt;br</span> <span class="nt">/&gt;&lt;h1&gt;</span>Summary:<span class="nt">&lt;/h1&gt;</span>Bar!
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre>


                    <div class="last-modified">
                        Last modified: 8 May 2015
                    </div>
                </article>

                <section class="disqus">
                    <div id="disqus_thread"></div>
                </section>
            </div>
        </section>
    </main>
</div>


<script data-main="/resharper-devguide/app/js/main.build" data-baseurl="/resharper-devguide/" src="/resharper-devguide/app/js/vendor/requirejs/require.js"></script>

</body>
</html>

